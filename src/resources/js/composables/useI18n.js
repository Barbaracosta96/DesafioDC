import { reactive, computed } from 'vue';

const STORAGE_KEY = 'dabang_lang';
const DEFAULT_LANG = 'pt';

const translations = {
  en: {
    // Nav
    nav_dashboard: 'Dashboard',
    nav_leaderboard: 'Leaderboard',
    nav_order: 'Order',
    nav_products: 'Products',
    nav_salesReport: 'Sales Report',
    nav_messages: 'Messages',
    nav_settings: 'Settings',
    nav_signOut: 'Sign Out',
    nav_users: 'Users',
    nav_admin: 'Admin',
    nav_getPro: 'Get Pro',
    nav_proDesc: 'Get access to all features on Retumbas',
    // Topbar
    search_placeholder: 'Search here...',
    search_messages: 'Search messages...',
    // Notifications
    notif_title: 'Notifications',
    notif_unread: 'unread',
    notif_markAllRead: 'Mark all read',
    notif_all: 'All',
    notif_unreadTab: 'Unread',
    notif_readTab: 'Read',
    notif_viewAll: 'View All Notifications',
    notif_empty: 'No notifications',
    // Messages
    msg_title: 'Messages',
    msg_unread: 'unread messages',
    msg_newMessage: 'New Message',
    // User menu
    menu_settings: 'Settings',
    menu_signOut: 'Sign Out',
    // Flash
    flash_success: '',
    flash_error: '',
    // Dashboard
    dash_todaySales: "Today's Sales",
    dash_salesSummary: 'Sales Summary',
    dash_export: 'Export',
    dash_totalRevenue: 'Total Revenue',
    dash_totalOrders: 'Total Orders',
    dash_activeProducts: 'Active Products',
    dash_newCustomers: 'New Customers',
    dash_visitorInsights: 'Visitor Insights',
    dash_monthlyVisitors: 'Monthly unique visitors',
    dash_loyal: 'Loyal',
    dash_new: 'New',
    dash_unique: 'Unique',
    dash_totalRevenueChart: 'Total Revenue',
    dash_last7days: 'Last 7 days',
    dash_online: 'Online',
    dash_offline: 'Offline',
    dash_satisfaction: 'Customer Satisfaction',
    dash_lastMonth: 'Last month',
    dash_thisMonth: 'This month',
    dash_topProducts: 'Top Products',
    dash_seeAll: 'See all',
    dash_name: 'Name',
    dash_sales: 'Sales',
    dash_salesMapping: 'Sales Mapping by Country',
    dash_interactiveMap: 'Interactive Map',
    dash_targetVsReality: 'Target vs Reality',
    dash_reality: 'Reality',
    dash_target: 'Target',
    dash_recentSales: 'Recent Sales',
    dash_id: 'ID',
    dash_customer: 'Customer',
    dash_amount: 'Amount',
    dash_status: 'Status',
    dash_date: 'Date',
    dash_noSales: 'No sales recorded yet',
    dash_walkIn: 'Walk-in Customer',
    dash_lowStock: 'product(s) with low stock.',
    dash_viewProducts: 'View products',
    // Status
    status_completed: 'Completed',
    status_pending: 'Pending',
    status_cancelled: 'Cancelled',
    // Notification content
    notif1_title: 'New Order Received',
    notif1_body: 'Order #1042 from Sarah Johnson — R$ 340.00',
    notif2_title: 'Low Stock Alert',
    notif2_body: 'Product "Wireless Headphones" has only 3 units left.',
    notif3_title: 'Sale Completed',
    notif3_body: 'Sale #1039 has been successfully completed.',
    notif4_title: 'New Customer',
    notif4_body: 'Michael Chen just created an account.',
    notif5_title: 'Payment Failed',
    notif5_body: 'Payment for order #1035 was declined. Follow up required.',
    notif6_title: 'Monthly Report Ready',
    notif6_body: 'Your February 2026 sales report is ready to view.',
    notif7_title: 'Sales Milestone',
    notif7_body: 'Congratulations! You reached R$ 50,000 in sales this month.',
    // Time labels
    time_2min: '2 minutes ago',
    time_15min: '15 minutes ago',
    time_1h: '1 hour ago',
    time_3h: '3 hours ago',
    time_yesterday: 'Yesterday',
    time_2days: '2 days ago',
    // Settings
    set_title: 'Settings',
    set_subtitle: 'Manage your account preferences',
    set_tab_profile: 'Profile',
    set_tab_security: 'Security',
    set_tab_notifications: 'Notifications',
    set_tab_appearance: 'Appearance',
    set_profileInfo: 'Profile Information',
    set_profilePhoto: 'Profile Photo',
    set_photoDesc: 'JPG, PNG or GIF. Max size 2MB.',
    set_changePhoto: 'Change photo',
    set_firstName: 'First Name',
    set_lastName: 'Last Name',
    set_email: 'Email Address',
    set_phone: 'Phone',
    set_bio: 'Bio',
    set_bioPlaceholder: 'Tell us a bit about yourself...',
    set_saveChanges: 'Save Changes',
    set_saved: 'Saved!',
    set_changePassword: 'Change Password',
    set_currentPassword: 'Current Password',
    set_newPassword: 'New Password',
    set_confirmPassword: 'Confirm New Password',
    set_updatePassword: 'Update Password',
    set_2fa: 'Two-Factor Authentication',
    set_2faDesc: 'Add an extra layer of security to your account.',
    set_authApp: 'Authenticator App',
    set_authAppDesc: 'Use an authenticator app to generate codes',
    set_enable: 'Enable',
    set_notifPrefs: 'Notification Preferences',
    set_notif1: 'New Order',
    set_notif1desc: 'Notify when a new order is placed',
    set_notif2: 'Order Status Update',
    set_notif2desc: 'Notify when an order status changes',
    set_notif3: 'New Message',
    set_notif3desc: 'Notify when you receive a message',
    set_notif4: 'Low Stock Alert',
    set_notif4desc: 'Notify when product stock is low',
    set_notif5: 'Monthly Report',
    set_notif5desc: 'Receive monthly summary reports',
    set_notif6: 'Security Alerts',
    set_notif6desc: 'Notify for unusual account activity',
    set_savePrefs: 'Save Preferences',
    set_appearance: 'Appearance',
    set_theme: 'Theme',
    set_themeLight: 'Light',
    set_themeDark: 'Dark',
    set_themeSystem: 'System',
    set_accentColor: 'Accent Color',
    // Products
    prod_title: 'Products',
    prod_stock: 'Product Stock',
    prod_registered: 'product(s) registered',
    prod_new: 'New Product',
    prod_searchPlaceholder: 'Search by name or SKU...',
    prod_allCategories: 'All categories',
    prod_allStatus: 'All statuses',
    prod_filter: 'Filter',
    prod_name: 'Product',
    prod_sku: 'SKU',
    prod_category: 'Category',
    prod_price: 'Price',
    prod_stock_col: 'Stock',
    prod_status: 'Status',
    prod_actions: 'Actions',
    prod_active: 'Active',
    prod_inactive: 'Inactive',
    prod_noProducts: 'No products found.',
    // Sales
    sale_title: 'Sales',
    sale_tracking: 'Sales Tracking',
    sale_registered: 'sale(s) registered',
    sale_new: 'New Sale',
    sale_searchPlaceholder: 'Search by customer...',
    sale_allStatus: 'All statuses',
    sale_filter: 'Filter',
    sale_id: 'ID',
    sale_customer: 'Customer',
    sale_seller: 'Seller',
    sale_amount: 'Amount',
    sale_status: 'Status',
    sale_date: 'Date',
    sale_actions: 'Actions',
    sale_noSales: 'No sales found.',
    // Customers
    cust_title: 'Customers',
    cust_registered: 'customer(s) registered',
    cust_new: 'New Customer',
    cust_searchPlaceholder: 'Search by name, email or phone...',
    cust_filter: 'Filter',
    cust_customer: 'Customer',
    cust_contact: 'Contact',
    cust_sales: 'Sales',
    cust_totalPurchased: 'Total Purchased',
    cust_actions: 'Actions',
    cust_noCustomers: 'No customers found.',
    // Users
    usr_title: 'Users',
    usr_registered: 'user(s) registered',
    usr_new: 'New User',
    usr_name: 'Name',
    usr_email: 'Email',
    usr_role: 'Role',
    usr_actions: 'Actions',
  },
  pt: {
    // Nav
    nav_dashboard: 'Painel',
    nav_leaderboard: 'Classificação',
    nav_order: 'Pedidos',
    nav_products: 'Produtos',
    nav_salesReport: 'Relatório de Vendas',
    nav_messages: 'Mensagens',
    nav_settings: 'Configurações',
    nav_signOut: 'Sair',
    nav_users: 'Usuários',
    nav_admin: 'Admin',
    nav_getPro: 'Obter Pro',
    nav_proDesc: 'Acesse todos os recursos do Retumbas',
    // Topbar
    search_placeholder: 'Buscar...',
    search_messages: 'Buscar mensagens...',
    // Notifications
    notif_title: 'Notificações',
    notif_unread: 'não lidas',
    notif_markAllRead: 'Marcar tudo como lido',
    notif_all: 'Todas',
    notif_unreadTab: 'Não lidas',
    notif_readTab: 'Lidas',
    notif_viewAll: 'Ver Todas as Notificações',
    notif_empty: 'Nenhuma notificação',
    // Messages
    msg_title: 'Mensagens',
    msg_unread: 'mensagens não lidas',
    msg_newMessage: 'Nova Mensagem',
    // User menu
    menu_settings: 'Configurações',
    menu_signOut: 'Sair',
    // Dashboard
    dash_todaySales: 'Vendas de Hoje',
    dash_salesSummary: 'Resumo de Vendas',
    dash_export: 'Exportar',
    dash_totalRevenue: 'Receita Total',
    dash_totalOrders: 'Total de Pedidos',
    dash_activeProducts: 'Produtos Ativos',
    dash_newCustomers: 'Novos Clientes',
    dash_visitorInsights: 'Insights de Visitantes',
    dash_monthlyVisitors: 'Visitantes únicos mensais',
    dash_loyal: 'Fidelizados',
    dash_new: 'Novos',
    dash_unique: 'Únicos',
    dash_totalRevenueChart: 'Receita Total',
    dash_last7days: 'Últimos 7 dias',
    dash_online: 'Online',
    dash_offline: 'Offline',
    dash_satisfaction: 'Satisfação de Clientes',
    dash_lastMonth: 'Mês passado',
    dash_thisMonth: 'Este mês',
    dash_topProducts: 'Top Produtos',
    dash_seeAll: 'Ver todos',
    dash_name: 'Nome',
    dash_sales: 'Vendas',
    dash_salesMapping: 'Vendas por País',
    dash_interactiveMap: 'Mapa Interativo',
    dash_targetVsReality: 'Meta vs Realidade',
    dash_reality: 'Realidade',
    dash_target: 'Meta',
    dash_recentSales: 'Vendas Recentes',
    dash_id: 'ID',
    dash_customer: 'Cliente',
    dash_amount: 'Valor',
    dash_status: 'Status',
    dash_date: 'Data',
    dash_noSales: 'Nenhuma venda registrada',
    dash_walkIn: 'Consumidor Final',
    dash_lowStock: 'produto(s) com estoque baixo.',
    dash_viewProducts: 'Ver produtos',
    // Status
    status_completed: 'Concluída',
    status_pending: 'Pendente',
    status_cancelled: 'Cancelada',
    // Notification content
    notif1_title: 'Novo Pedido Recebido',
    notif1_body: 'Pedido #1042 de Sarah Johnson — R$ 340,00',
    notif2_title: 'Alerta de Estoque Baixo',
    notif2_body: 'Produto "Headphones Wireless" tem apenas 3 unidades restantes.',
    notif3_title: 'Venda Concluída',
    notif3_body: 'Venda #1039 foi concluída com sucesso.',
    notif4_title: 'Novo Cliente',
    notif4_body: 'Michael Chen acabou de criar uma conta.',
    notif5_title: 'Pagamento Recusado',
    notif5_body: 'Pagamento do pedido #1035 foi recusado. Acompanhamento necessário.',
    notif6_title: 'Relatório Mensal Pronto',
    notif6_body: 'Seu relatório de vendas de fevereiro de 2026 está pronto.',
    notif7_title: 'Marco de Vendas',
    notif7_body: 'Parabéns! Você atingiu R$ 50.000 em vendas neste mês.',
    // Time labels
    time_2min: 'há 2 minutos',
    time_15min: 'há 15 minutos',
    time_1h: 'há 1 hora',
    time_3h: 'há 3 horas',
    time_yesterday: 'Ontem',
    time_2days: 'há 2 dias',
    // Settings
    set_title: 'Configurações',
    set_subtitle: 'Gerencie as preferências da sua conta',
    set_tab_profile: 'Perfil',
    set_tab_security: 'Segurança',
    set_tab_notifications: 'Notificações',
    set_tab_appearance: 'Aparência',
    set_profileInfo: 'Informações do Perfil',
    set_profilePhoto: 'Foto de Perfil',
    set_photoDesc: 'JPG, PNG ou GIF. Tamanho máximo 2MB.',
    set_changePhoto: 'Alterar foto',
    set_firstName: 'Nome',
    set_lastName: 'Sobrenome',
    set_email: 'E-mail',
    set_phone: 'Telefone',
    set_bio: 'Bio',
    set_bioPlaceholder: 'Conte um pouco sobre você...',
    set_saveChanges: 'Salvar Alterações',
    set_saved: 'Salvo!',
    set_changePassword: 'Alterar Senha',
    set_currentPassword: 'Senha Atual',
    set_newPassword: 'Nova Senha',
    set_confirmPassword: 'Confirmar Nova Senha',
    set_updatePassword: 'Atualizar Senha',
    set_2fa: 'Autenticação de Dois Fatores',
    set_2faDesc: 'Adicione uma camada extra de segurança à sua conta.',
    set_authApp: 'Aplicativo Autenticador',
    set_authAppDesc: 'Use um app autenticador para gerar códigos',
    set_enable: 'Ativar',
    set_notifPrefs: 'Preferências de Notificação',
    set_notif1: 'Novo Pedido',
    set_notif1desc: 'Notificar quando um novo pedido for feito',
    set_notif2: 'Atualização de Status',
    set_notif2desc: 'Notificar quando o status de um pedido mudar',
    set_notif3: 'Nova Mensagem',
    set_notif3desc: 'Notificar quando receber uma mensagem',
    set_notif4: 'Alerta de Estoque Baixo',
    set_notif4desc: 'Notificar quando o estoque de produto estiver baixo',
    set_notif5: 'Relatório Mensal',
    set_notif5desc: 'Receber resumos mensais por e-mail',
    set_notif6: 'Alertas de Segurança',
    set_notif6desc: 'Notificar sobre atividades suspeitas na conta',
    set_savePrefs: 'Salvar Preferências',
    set_appearance: 'Aparência',
    set_theme: 'Tema',
    set_themeLight: 'Claro',
    set_themeDark: 'Escuro',
    set_themeSystem: 'Sistema',
    set_accentColor: 'Cor de Destaque',
    // Products
    prod_title: 'Produtos',
    prod_stock: 'Estoque de Produtos',
    prod_registered: 'produto(s) cadastrado(s)',
    prod_new: 'Novo Produto',
    prod_searchPlaceholder: 'Buscar por nome ou SKU...',
    prod_allCategories: 'Todas as categorias',
    prod_allStatus: 'Todos os status',
    prod_filter: 'Filtrar',
    prod_name: 'Produto',
    prod_sku: 'SKU',
    prod_category: 'Categoria',
    prod_price: 'Preço',
    prod_stock_col: 'Estoque',
    prod_status: 'Status',
    prod_actions: 'Ações',
    prod_active: 'Ativo',
    prod_inactive: 'Inativo',
    prod_noProducts: 'Nenhum produto encontrado.',
    // Sales
    sale_title: 'Vendas',
    sale_tracking: 'Acompanhamento de Vendas',
    sale_registered: 'venda(s) registrada(s)',
    sale_new: 'Nova Venda',
    sale_searchPlaceholder: 'Buscar por cliente...',
    sale_allStatus: 'Todos os status',
    sale_filter: 'Filtrar',
    sale_id: 'ID',
    sale_customer: 'Cliente',
    sale_seller: 'Vendedor',
    sale_amount: 'Valor',
    sale_status: 'Status',
    sale_date: 'Data',
    sale_actions: 'Ações',
    sale_noSales: 'Nenhuma venda encontrada.',
    // Customers
    cust_title: 'Clientes',
    cust_registered: 'cliente(s) cadastrado(s)',
    cust_new: 'Novo Cliente',
    cust_searchPlaceholder: 'Buscar por nome, e-mail ou telefone...',
    cust_filter: 'Filtrar',
    cust_customer: 'Cliente',
    cust_contact: 'Contato',
    cust_sales: 'Vendas',
    cust_totalPurchased: 'Total Comprado',
    cust_actions: 'Ações',
    cust_noCustomers: 'Nenhum cliente encontrado.',
    // Users
    usr_title: 'Usuários',
    usr_registered: 'usuário(s) cadastrado(s)',
    usr_new: 'Novo Usuário',
    usr_name: 'Nome',
    usr_email: 'E-mail',
    usr_role: 'Papel',
    usr_actions: 'Ações',
  },
};

// Singleton reactive state
const state = reactive({
  locale: localStorage.getItem(STORAGE_KEY) || DEFAULT_LANG,
});

export function useI18n() {
  function t(key) {
    return translations[state.locale]?.[key] ?? translations['en']?.[key] ?? key;
  }

  function setLocale(code) {
    state.locale = code;
    localStorage.setItem(STORAGE_KEY, code);
  }

  const locale = computed(() => state.locale);

  return { t, locale, setLocale };
}
